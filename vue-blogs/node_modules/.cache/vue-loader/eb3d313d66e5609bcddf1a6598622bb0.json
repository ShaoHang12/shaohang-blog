{"remainingRequest":"E:\\VScode-workplace\\我的博客\\shaohang-blog\\vue-blogs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\VScode-workplace\\我的博客\\shaohang-blog\\vue-blogs\\src\\views\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\VScode-workplace\\我的博客\\shaohang-blog\\vue-blogs\\src\\views\\Home.vue","mtime":1670381589237},{"path":"E:\\VScode-workplace\\我的博客\\shaohang-blog\\vue-blogs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1669963799101},{"path":"E:\\VScode-workplace\\我的博客\\shaohang-blog\\vue-blogs\\node_modules\\babel-loader\\lib\\index.js","mtime":1669963799734},{"path":"E:\\VScode-workplace\\我的博客\\shaohang-blog\\vue-blogs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1669963799101},{"path":"E:\\VScode-workplace\\我的博客\\shaohang-blog\\vue-blogs\\node_modules\\vue-loader\\lib\\index.js","mtime":1669963800633}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCYW5uZXIgZnJvbSAiQC9jb21wb25lbnRzL2Jhbm5lciI7CmltcG9ydCBGZWF0dXJlIGZyb20gIkAvY29tcG9uZW50cy9mZWF0dXJlIjsKaW1wb3J0IHNlY3Rpb25UaXRsZSBmcm9tICJAL2NvbXBvbmVudHMvc2VjdGlvbi10aXRsZSI7CmltcG9ydCBQb3N0IGZyb20gIkAvY29tcG9uZW50cy9wb3N0IjsKaW1wb3J0IFNtYWxsSWNvIGZyb20gIkAvY29tcG9uZW50cy9zbWFsbC1pY28iOwppbXBvcnQgUXVvdGUgZnJvbSAiQC9jb21wb25lbnRzL3F1b3RlIjsKaW1wb3J0IHsgZmV0Y2hGb2N1cywgZmV0Y2hMaXN0IH0gZnJvbSAiLi4vYXBpIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSG9tZSIsCiAgcHJvcHM6IFsiY2F0ZSIsICJ3b3JkcyJdLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmZWF0dXJlczogW10sCiAgICAgIHBvc3RMaXN0OiBbXSwKICAgICAgY3VyclBhZ2U6IDEsCiAgICAgIGhhc05leHRQYWdlOiBmYWxzZSwKICAgICAgc2VhcmNoOicnLAogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEJhbm5lciwKICAgIEZlYXR1cmUsCiAgICBzZWN0aW9uVGl0bGUsCiAgICBQb3N0LAogICAgU21hbGxJY28sCiAgICBRdW90ZSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBzZWFyY2hXb3JkcygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLnBhcmFtcy53b3JkczsKICAgIH0sCiAgICBjYXRlZ29yeSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLnBhcmFtcy5jYXRlOwogICAgfSwKICAgIGhpZGVTbG9nYW4oKSB7CiAgICAgIHJldHVybiB0aGlzLmNhdGVnb3J5IHx8IHRoaXMuc2VhcmNoV29yZHM7CiAgICB9LAogICAgbm90aWNlKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy5ub3RpY2U7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgZmV0Y2hGb2N1cygpIHsKICAgICAgZmV0Y2hGb2N1cygpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy5mZWF0dXJlcyA9IHJlcy5kYXRhIHx8IFtdOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfSk7CiAgICB9LAogICAgZmV0Y2hMaXN0KCkgewogICAgICBjb25zb2xlLmxvZygiMTIzMTIiKTsKICAgICAgY29uc3QgZm9ybSA9IHsKICAgICAgICBhcnRpY2xlVGl0bGU6IHRoaXMuJHJvdXRlLnBhcmFtcy53b3JkcywKICAgICAgICBhcnRpY2xlQ2c6ICIxIiwKICAgICAgfTsKICAgICAgZmV0Y2hMaXN0KGZvcm0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgY29uc29sZS5sb2coInJlcyIsIHJlcy5kYXRhKTsKICAgICAgICAgIHRoaXMucG9zdExpc3QgPSByZXMuZGF0YS5yZWNvcmRzIHx8IFtdOwogICAgICAgICAgdGhpcy5jdXJyUGFnZSA9IHJlcy5kYXRhLmN1cnJlbnQ7CiAgICAgICAgICB0aGlzLmhhc05leHRQYWdlID0gcmVzLmRhdGEuaGFzTmV4dFBhZ2U7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB9KTsKICAgICAgY29uc29sZS5sb2coIjQ1MzQ1NDMiKTsKICAgIH0sCiAgICBsb2FkTW9yZSgpIHsKICAgICAgZmV0Y2hMaXN0KHsgcGFnZTogdGhpcy5jdXJyUGFnZSArIDEgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy5wb3N0TGlzdCA9IHRoaXMucG9zdExpc3QuY29uY2F0KHJlcy5kYXRhLml0ZW1zIHx8IFtdKTsKICAgICAgICB0aGlzLmN1cnJQYWdlID0gcmVzLmRhdGEucGFnZTsKICAgICAgICB0aGlzLmhhc05leHRQYWdlID0gcmVzLmRhdGEuaGFzTmV4dFBhZ2U7CiAgICAgIH0pOwogICAgfSwKICAgIHN1Ym1pdEZvcm0oc2VhcmNoKXsKICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGAvc2VhcmNoLyR7c2VhcmNofWApCiAgICB9CiAgfSwKICB3YXRjaDp7CiAgICAkcm91dGUoKSB7CsKgwqDCoMKgwqBsb2NhdGlvbi5yZWxvYWQoKTsKwqDCoMKgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICAvLyB0aGlzLmZldGNoRm9jdXMoKTsKICAgIHRoaXMuZmV0Y2hMaXN0KCk7CiAgfSwKfTsK"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"home\">\n    <banner isHome=\"true\"></banner>\n    <div class=\"site-content animate\">\n      <div class=\"search\">\n        <el-input\n          v-model=\"search\"\n          placeholder=\"请输入要查找的博客\"\n          class=\"input-with-select\"\n          @keyup.enter.native=\"submitForm(search)\"\n        >\n        </el-input>\n      </div>\n      <!--通知栏-->\n      <div class=\"notify\">\n        <div class=\"search-result\" v-if=\"hideSlogan\">\n          <span v-if=\"searchWords\">搜索结果：\"{{ searchWords }}\" 相关文章</span>\n          <span v-else-if=\"category\">分类 \"{{ category }}\" 相关文章</span>\n        </div>\n      </div>\n\n      <!--焦点图-->\n      <div class=\"top-feature\" v-if=\"!hideSlogan\">\n        <div class=\"feature-content\">\n          <div class=\"feature-item\" v-for=\"item in features\" :key=\"item.title\">\n            <Feature :data=\"item\"></Feature>\n          </div>\n        </div>\n      </div>\n      <!--文章列表-->\n      <main class=\"site-main\" :class=\"{ search: hideSlogan }\">\n        <section-title v-if=\"!hideSlogan\">推荐</section-title>\n        <template v-for=\"item in postList\">\n          <post :post=\"item\" :key=\"item.id\"></post>\n        </template>\n      </main>\n\n      <!--加载更多-->\n      <div class=\"more\" v-show=\"hasNextPage\">\n        <div class=\"more-btn\" @click=\"loadMore\">More</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Banner from \"@/components/banner\";\nimport Feature from \"@/components/feature\";\nimport sectionTitle from \"@/components/section-title\";\nimport Post from \"@/components/post\";\nimport SmallIco from \"@/components/small-ico\";\nimport Quote from \"@/components/quote\";\nimport { fetchFocus, fetchList } from \"../api\";\n\nexport default {\n  name: \"Home\",\n  props: [\"cate\", \"words\"],\n  data() {\n    return {\n      features: [],\n      postList: [],\n      currPage: 1,\n      hasNextPage: false,\n      search:'',\n    };\n  },\n  components: {\n    Banner,\n    Feature,\n    sectionTitle,\n    Post,\n    SmallIco,\n    Quote,\n  },\n  computed: {\n    searchWords() {\n      return this.$route.params.words;\n    },\n    category() {\n      return this.$route.params.cate;\n    },\n    hideSlogan() {\n      return this.category || this.searchWords;\n    },\n    notice() {\n      return this.$store.getters.notice;\n    },\n  },\n  methods: {\n    fetchFocus() {\n      fetchFocus()\n        .then((res) => {\n          this.features = res.data || [];\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    fetchList() {\n      console.log(\"12312\");\n      const form = {\n        articleTitle: this.$route.params.words,\n        articleCg: \"1\",\n      };\n      fetchList(form)\n        .then((res) => {\n          console.log(\"res\", res.data);\n          this.postList = res.data.records || [];\n          this.currPage = res.data.current;\n          this.hasNextPage = res.data.hasNextPage;\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n      console.log(\"4534543\");\n    },\n    loadMore() {\n      fetchList({ page: this.currPage + 1 }).then((res) => {\n        this.postList = this.postList.concat(res.data.items || []);\n        this.currPage = res.data.page;\n        this.hasNextPage = res.data.hasNextPage;\n      });\n    },\n    submitForm(search){\n       this.$router.push(`/search/${search}`)\n    }\n  },\n  watch:{\n    $route() {\n     location.reload();\n   },\n  },\n  mounted() {\n    // this.fetchFocus();\n    this.fetchList();\n  },\n};\n</script>\n<style scoped lang=\"less\">\n.site-content {\n  .notify {\n    margin: 60px 0;\n    border-radius: 3px;\n    & > div {\n      padding: 20px;\n    }\n  }\n\n  .search-result {\n    padding: 15px 20px;\n    text-align: center;\n    font-size: 20px;\n    font-weight: 400;\n    border: 1px dashed #ddd;\n    color: #828282;\n  }\n}\n\n.top-feature {\n  width: 100%;\n  height: auto;\n  margin-top: 30px;\n\n  .feature-content {\n    margin-top: 10px;\n    display: flex;\n    justify-content: space-between;\n    position: relative;\n\n    .feature-item {\n      width: 32.9%;\n    }\n  }\n}\n\n.site-main {\n  padding-top: 80px;\n\n  &.search {\n    padding-top: 0;\n  }\n}\n\n.more {\n  margin: 50px 0;\n  .more-btn {\n    width: 100px;\n    height: 40px;\n    line-height: 40px;\n    text-align: center;\n    color: #adadad;\n    border: 1px solid #adadad;\n    border-radius: 20px;\n    margin: 0 auto;\n    cursor: pointer;\n    &:hover {\n      color: #8fd0cc;\n      border: 1px dashed #8fd0cc;\n    }\n  }\n}\n\n/******/\n@media (max-width: 800px) {\n  .top-feature {\n    display: none;\n  }\n\n  .site-main {\n    padding-top: 40px;\n  }\n\n  .site-content {\n    .notify {\n      margin: 30px 0 0 0;\n    }\n\n    .search-result {\n      margin-bottom: 20px;\n      font-size: 16px;\n    }\n  }\n}\n\n/******/\n</style>\n"]}]}