{"remainingRequest":"E:\\VScode-workplace\\我的博客\\shaohang-blog\\vue-blogs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\VScode-workplace\\我的博客\\shaohang-blog\\vue-blogs\\src\\views\\admin\\UserManager\\index.vue?vue&type=style&index=0&id=5548675b&scoped=true&lang=css&","dependencies":[{"path":"E:\\VScode-workplace\\我的博客\\shaohang-blog\\vue-blogs\\src\\views\\admin\\UserManager\\index.vue","mtime":1670462862916},{"path":"E:\\VScode-workplace\\我的博客\\shaohang-blog\\vue-blogs\\node_modules\\css-loader\\dist\\cjs.js","mtime":1669963799567},{"path":"E:\\VScode-workplace\\我的博客\\shaohang-blog\\vue-blogs\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1669963801281},{"path":"E:\\VScode-workplace\\我的博客\\shaohang-blog\\vue-blogs\\node_modules\\postcss-loader\\src\\index.js","mtime":1669963800278},{"path":"E:\\VScode-workplace\\我的博客\\shaohang-blog\\vue-blogs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1669963799101},{"path":"E:\\VScode-workplace\\我的博客\\shaohang-blog\\vue-blogs\\node_modules\\vue-loader\\lib\\index.js","mtime":1669963800633}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5wYWdpbmF0aW9uIHsNCiAgbWFyZ2luLXRvcDogMTBweDsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2Y5ZjlmOTsNCn0NCi5hZGRVc2VyIHsNCiAgbWFyZ2luLWJvdHRvbTogMTVweDsNCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoOA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/admin/UserManager","sourcesContent":["<template>\r\n  <div>\r\n    <el-button class=\"addUser\" @click=\"addUser\" type=\"success\"\r\n      >新增用户</el-button\r\n    >\r\n    <el-table :data=\"tableData\" style=\"width: 100%\">\r\n      <el-table-column prop=\"username\" label=\"用户\"> </el-table-column>\r\n      <el-table-column prop=\"nickname\" label=\"昵称\"> </el-table-column>\r\n\r\n      <el-table-column label=\"性别\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.sex == \"0\" ? \"男\" : \"女\" }}\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"角色\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.role == \"admin\" ? \"管理员\" : \"普通用户\" }}\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" @click=\"edit(scope.row.userId)\" type=\"primary\"\r\n            >编辑</el-button\r\n          >\r\n          <el-button\r\n            @click=\"deleteUser(scope.row.userId)\"\r\n            size=\"mini\"\r\n            type=\"warning\"\r\n            >删除</el-button\r\n          >\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <div class=\"block pagination\">\r\n      <el-pagination\r\n        @prev-click=\"prePage\"\r\n        @next-click=\"nextPage\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"pagenum\"\r\n        :page-size=\"pagesize\"\r\n        background=\"#f9f9f9\"\r\n        layout=\"prev, pager, next\"\r\n        :total=\"total\"\r\n      />\r\n    </div>\r\n\r\n    <el-dialog title=\"编辑\" :visible.sync=\"dialogFormVisible\">\r\n      <el-form label-width=\"100px\" :model=\"form\">\r\n        <el-form-item label=\"用户名\">\r\n          <el-input\r\n            :disabled=\"isEdit\"\r\n            v-model=\"form.username\"\r\n            autocomplete=\"off\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"昵称\">\r\n          <el-input v-model=\"form.nickname\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"性别\">\r\n          <el-select v-model=\"form.sex\" placeholder=\"请选择角色\">\r\n            <el-option label=\"男\" value=\"0\"></el-option>\r\n            <el-option label=\"女\" value=\"1\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"角色\">\r\n          <el-select v-model=\"form.role\" placeholder=\"请选择角色\">\r\n            <el-option label=\"普通用户\" value=\"user\"></el-option>\r\n            <el-option label=\"管理员\" value=\"admin\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\">\r\n          <el-input\r\n            type=\"password\"\r\n            v-model=\"form.password\"\r\n            autocomplete=\"off\"\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"cancelDiog\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"update\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Message } from \"element-ui\";\r\nimport {\r\n  fetchList,\r\n  getUserById,\r\n  updateUser,\r\n  deleteUser,\r\n  saveUser,\r\n} from \"../../../api/admin/user\";\r\n\r\nexport default {\r\n  mounted() {\r\n    this.getUserList();\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      isEdit: true,\r\n      formLabelWidth: \"120px\",\r\n      form: {},\r\n      dialogFormVisible: false,\r\n      total: 0, //总共数据条数\r\n      pagesize: 10, //当前分页条数\r\n      pagenum: 1, //代表分页器第几页\r\n      tableData: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getUserList();\r\n  },\r\n  methods: {\r\n    //  关闭弹窗\r\n    cancelDiog() {\r\n      this.dialogFormVisible = false;\r\n      this.form = {};\r\n    },\r\n    handleOpen(key, keyPath) {\r\n      console.log(key, keyPath);\r\n    },\r\n    handleClose(key, keyPath) {\r\n      console.log(key, keyPath);\r\n    },\r\n    toUserView() {\r\n      console.log(\"toUserView\");\r\n      this.$router.push({ name: \"userManager\" });\r\n    },\r\n    //前进\r\n    prePage() {\r\n      this.pagenum -= 1;\r\n      console.log(this.pagenum, \"前进\");\r\n      this.getUserList();\r\n    },\r\n    //后退\r\n    nextPage() {\r\n      this.pagenum += 1;\r\n      console.log(this.pagenum, \"后退\");\r\n      this.getUserList();\r\n    },\r\n    // 初始页currentPage、初始每页数据数pagesize和数据data\r\n    handleSizeChange(size) {\r\n      this.pagesize = size;\r\n      this.getUserList();\r\n    },\r\n    handleCurrentChange(currentPage) {\r\n      console.log(currentPage);\r\n      this.pagenum = currentPage;\r\n      this.getUserList();\r\n    },\r\n    // 删除用户信息\r\n    async deleteUser(id) {\r\n      console.log(\"delete\");\r\n      const res = await deleteUser(id);\r\n      if (res.status == 200) {\r\n        Message({\r\n          message: res.msg,\r\n          type: \"success\",\r\n          duration: 3 * 1000,\r\n        });\r\n      }\r\n\r\n      this.getUserList();\r\n    },\r\n    // 修改用户信息\r\n    async update() {\r\n      this.dialogFormVisible = false;\r\n      if (this.isEdit) {\r\n        console.log(\"edit\");\r\n        const res = await updateUser(this.form);\r\n        if (res.status == 200) {\r\n          Message({\r\n            message: res.msg,\r\n            type: \"success\",\r\n            duration: 3 * 1000,\r\n          });\r\n        }\r\n      } else {\r\n        console.log(\"save\");\r\n        const res = await saveUser(this.form);\r\n        if (res.status == 200) {\r\n          Message({\r\n            message: res.msg,\r\n            type: \"success\",\r\n            duration: 3 * 1000,\r\n          });\r\n        }\r\n      }\r\n      this.getUserList();\r\n    },\r\n    // 获取用户列表\r\n    async getUserList() {\r\n      const { data: res } = await fetchList({\r\n        params: {\r\n          pagesize: this.pagesize,\r\n          pagenum: this.pagenum,\r\n        },\r\n      });\r\n      this.tableData = res.records;\r\n      this.total = res.total;\r\n      console.log(res);\r\n    },\r\n    async edit(id) {\r\n      this.isEdit = true;\r\n      this.dialogFormVisible = true;\r\n      const { data: res } = await getUserById(id);\r\n      this.form = res;\r\n    },\r\n    // 新增用户\r\n    async addUser() {\r\n      console.log(\"add\");\r\n      this.isEdit = false;\r\n      this.dialogFormVisible = true;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.pagination {\r\n  margin-top: 10px;\r\n  background-color: #f9f9f9;\r\n}\r\n.addUser {\r\n  margin-bottom: 15px;\r\n}\r\n</style>\r\n"]}]}