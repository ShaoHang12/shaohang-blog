{"remainingRequest":"E:\\VScode-workplace\\我的博客\\shaohang-blog\\my-blogs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\VScode-workplace\\我的博客\\shaohang-blog\\my-blogs\\src\\views\\admin\\UserManager\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\VScode-workplace\\我的博客\\shaohang-blog\\my-blogs\\src\\views\\admin\\UserManager\\index.vue","mtime":1666063818973},{"path":"E:\\VScode-workplace\\我的博客\\shaohang-blog\\my-blogs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1669963799101},{"path":"E:\\VScode-workplace\\我的博客\\shaohang-blog\\my-blogs\\node_modules\\babel-loader\\lib\\index.js","mtime":1669963799734},{"path":"E:\\VScode-workplace\\我的博客\\shaohang-blog\\my-blogs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1669963799101},{"path":"E:\\VScode-workplace\\我的博客\\shaohang-blog\\my-blogs\\node_modules\\vue-loader\\lib\\index.js","mtime":1669963800633}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAiZWxlbWVudC11aSI7DQppbXBvcnQgew0KICBmZXRjaExpc3QsDQogIGdldFVzZXJCeUlkLA0KICB1cGRhdGVVc2VyLA0KICBkZWxldGVVc2VyLA0KICBzYXZlVXNlciwNCn0gZnJvbSAiLi4vLi4vLi4vYXBpL2FkbWluL3VzZXIiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5nZXRVc2VyTGlzdCgpOw0KICB9LA0KDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGlzRWRpdDogdHJ1ZSwNCiAgICAgIGZvcm1MYWJlbFdpZHRoOiAiMTIwcHgiLA0KICAgICAgZm9ybToge30sDQogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsDQogICAgICB0b3RhbDogMCwNCiAgICAgIHF1ZXJ5UGFyYW06IHsNCiAgICAgICAgcGFnZXNpemU6IDEwLA0KICAgICAgICBwYWdlbnVtOiAxLA0KICAgICAgfSwNCiAgICAgIHRhYmxlRGF0YTogW10sDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8vICDlhbPpl63lvLnnqpcNCiAgICBjYW5jZWxEaW9nKCkgew0KICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgdGhpcy5mb3JtID0ge307DQogICAgfSwNCiAgICBoYW5kbGVPcGVuKGtleSwga2V5UGF0aCkgew0KICAgICAgY29uc29sZS5sb2coa2V5LCBrZXlQYXRoKTsNCiAgICB9LA0KICAgIGhhbmRsZUNsb3NlKGtleSwga2V5UGF0aCkgew0KICAgICAgY29uc29sZS5sb2coa2V5LCBrZXlQYXRoKTsNCiAgICB9LA0KICAgIHRvVXNlclZpZXcoKSB7DQogICAgICBjb25zb2xlLmxvZygidG9Vc2VyVmlldyIpOw0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAidXNlck1hbmFnZXIiIH0pOw0KICAgIH0sDQoNCiAgICAvLyDliKDpmaTnlKjmiLfkv6Hmga8NCiAgICBhc3luYyBkZWxldGVVc2VyKGlkKSB7DQogICAgICBjb25zb2xlLmxvZygiZGVsZXRlIik7DQogICAgICBjb25zdCByZXMgPSBhd2FpdCBkZWxldGVVc2VyKGlkKTsNCiAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkgew0KICAgICAgICBNZXNzYWdlKHsNCiAgICAgICAgICBtZXNzYWdlOiByZXMubXNnLA0KICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgICBkdXJhdGlvbjogMyAqIDEwMDAsDQogICAgICAgIH0pOw0KICAgICAgfQ0KDQogICAgICB0aGlzLmdldFVzZXJMaXN0KCk7DQogICAgfSwNCiAgICAvLyDkv67mlLnnlKjmiLfkv6Hmga8NCiAgICBhc3luYyB1cGRhdGUoKSB7DQogICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgaWYgKHRoaXMuaXNFZGl0KSB7DQogICAgICAgIGNvbnNvbGUubG9nKCdlZGl0Jyk7DQogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHVwZGF0ZVVzZXIodGhpcy5mb3JtKTsNCiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gMjAwKSB7DQogICAgICAgICAgTWVzc2FnZSh7DQogICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnLA0KICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICAgICAgZHVyYXRpb246IDMgKiAxMDAwLA0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQoNCiAgICANCiAgICAgIH1lbHNlew0KICAgICAgICBjb25zb2xlLmxvZygnc2F2ZScpOw0KICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBzYXZlVXNlcih0aGlzLmZvcm0pOw0KICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDApIHsNCiAgICAgICAgICBNZXNzYWdlKHsNCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csDQogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsDQogICAgICAgICAgICBkdXJhdGlvbjogMyAqIDEwMDAsDQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKTsNCiAgICB9LA0KICAgIC8vIOiOt+WPlueUqOaIt+WIl+ihqA0KICAgIGFzeW5jIGdldFVzZXJMaXN0KCkgew0KICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IGZldGNoTGlzdCh7DQogICAgICAgIHBhcmFtczogew0KICAgICAgICAgIHBhZ2VzaXplOiB0aGlzLnF1ZXJ5UGFyYW0ucGFnZXNpemUsDQogICAgICAgICAgcGFnZW51bTogdGhpcy5xdWVyeVBhcmFtLnBhZ2VudW0sDQogICAgICAgIH0sDQogICAgICB9KTsNCiAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzLnJlY29yZHM7DQogICAgICB0aGlzLnRvdGFsID0gcmVzLnRvdGFsOw0KICAgICAgY29uc29sZS5sb2coIjExMjMxIiwgdGhpcy50YWJsZURhdGEpOw0KICAgIH0sDQogICAgYXN5bmMgZWRpdChpZCkgew0KICAgICAgdGhpcy5pc0VkaXQgPSB0cnVlOw0KICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWU7DQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgZ2V0VXNlckJ5SWQoaWQpOw0KICAgICAgdGhpcy5mb3JtID0gcmVzOw0KICAgIH0sDQogICAgLy8g5paw5aKe55So5oi3DQogICAgYXN5bmMgYWRkVXNlcigpIHsNCiAgICAgIGNvbnNvbGUubG9nKCJhZGQiKTsNCiAgICAgIHRoaXMuaXNFZGl0ID0gZmFsc2U7DQogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/admin/UserManager","sourcesContent":["<template>\r\n  <div>\r\n    <el-button class=\"addUser\" @click=\"addUser\" type=\"success\"\r\n      >新增用户</el-button\r\n    >\r\n    <el-table :data=\"tableData\" style=\"width: 100%\">\r\n      <el-table-column prop=\"username\" label=\"用户\"> </el-table-column>\r\n      <el-table-column prop=\"nickname\" label=\"昵称\"> </el-table-column>\r\n\r\n      <el-table-column label=\"性别\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.sex == \"0\" ? \"男\" : \"女\" }}\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"角色\">\r\n        <template slot-scope=\"scope\">\r\n          {{\r\n            scope.row.role == \"admin\"\r\n              ? \"管理员\":\"普通用户\"\r\n              \r\n          }}\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" @click=\"edit(scope.row.userId)\" type=\"primary\"\r\n            >编辑</el-button\r\n          >\r\n          <el-button\r\n            @click=\"deleteUser(scope.row.userId)\"\r\n            size=\"mini\"\r\n            type=\"warning\"\r\n            >删除</el-button\r\n          >\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <div class=\"block pagination\">\r\n      <el-pagination\r\n        background=\"#f9f9f9\"\r\n        layout=\"prev, pager, next\"\r\n        :total=\"total\"\r\n      />\r\n    </div>\r\n\r\n    <el-dialog title=\"编辑\" :visible.sync=\"dialogFormVisible\">\r\n      <el-form label-width=\"100px\" :model=\"form\">\r\n        <el-form-item label=\"用户名\">\r\n          <el-input\r\n            :disabled=\"isEdit\"\r\n            v-model=\"form.username\"\r\n            autocomplete=\"off\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"昵称\">\r\n          <el-input v-model=\"form.nickname\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"性别\">\r\n          <el-select v-model=\"form.sex\" placeholder=\"请选择角色\">\r\n            <el-option label=\"男\" value=\"0\"></el-option>\r\n            <el-option label=\"女\" value=\"1\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"角色\">\r\n          <el-select v-model=\"form.role\" placeholder=\"请选择角色\">\r\n            <el-option label=\"普通用户\" value=\"user\"></el-option>\r\n            <el-option label=\"管理员\" value=\"admin\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\">\r\n          <el-input\r\n            type=\"password\"\r\n            v-model=\"form.password\"\r\n            autocomplete=\"off\"\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"cancelDiog\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"update\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport { Message } from \"element-ui\";\r\nimport {\r\n  fetchList,\r\n  getUserById,\r\n  updateUser,\r\n  deleteUser,\r\n  saveUser,\r\n} from \"../../../api/admin/user\";\r\n\r\nexport default {\r\n  mounted() {\r\n    this.getUserList();\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      isEdit: true,\r\n      formLabelWidth: \"120px\",\r\n      form: {},\r\n      dialogFormVisible: false,\r\n      total: 0,\r\n      queryParam: {\r\n        pagesize: 10,\r\n        pagenum: 1,\r\n      },\r\n      tableData: [],\r\n    };\r\n  },\r\n  methods: {\r\n    //  关闭弹窗\r\n    cancelDiog() {\r\n      this.dialogFormVisible = false;\r\n      this.form = {};\r\n    },\r\n    handleOpen(key, keyPath) {\r\n      console.log(key, keyPath);\r\n    },\r\n    handleClose(key, keyPath) {\r\n      console.log(key, keyPath);\r\n    },\r\n    toUserView() {\r\n      console.log(\"toUserView\");\r\n      this.$router.push({ name: \"userManager\" });\r\n    },\r\n\r\n    // 删除用户信息\r\n    async deleteUser(id) {\r\n      console.log(\"delete\");\r\n      const res = await deleteUser(id);\r\n      if (res.status == 200) {\r\n        Message({\r\n          message: res.msg,\r\n          type: \"success\",\r\n          duration: 3 * 1000,\r\n        });\r\n      }\r\n\r\n      this.getUserList();\r\n    },\r\n    // 修改用户信息\r\n    async update() {\r\n       this.dialogFormVisible = false;\r\n      if (this.isEdit) {\r\n        console.log('edit');\r\n        const res = await updateUser(this.form);\r\n        if (res.status == 200) {\r\n          Message({\r\n            message: res.msg,\r\n            type: \"success\",\r\n            duration: 3 * 1000,\r\n          });\r\n        }\r\n\r\n    \r\n      }else{\r\n        console.log('save');\r\n        const res = await saveUser(this.form);\r\n        if (res.status == 200) {\r\n          Message({\r\n            message: res.msg,\r\n            type: \"success\",\r\n            duration: 3 * 1000,\r\n          });\r\n        }\r\n      }\r\n      this.getUserList();\r\n    },\r\n    // 获取用户列表\r\n    async getUserList() {\r\n      const { data: res } = await fetchList({\r\n        params: {\r\n          pagesize: this.queryParam.pagesize,\r\n          pagenum: this.queryParam.pagenum,\r\n        },\r\n      });\r\n      this.tableData = res.records;\r\n      this.total = res.total;\r\n      console.log(\"11231\", this.tableData);\r\n    },\r\n    async edit(id) {\r\n      this.isEdit = true;\r\n      this.dialogFormVisible = true;\r\n      const { data: res } = await getUserById(id);\r\n      this.form = res;\r\n    },\r\n    // 新增用户\r\n    async addUser() {\r\n      console.log(\"add\");\r\n      this.isEdit = false;\r\n      this.dialogFormVisible = true;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.pagination {\r\n  margin-top: 10px;\r\n  background-color: #f9f9f9;\r\n}\r\n.addUser {\r\n  margin-bottom: 15px;\r\n}\r\n</style>\r\n"]}]}